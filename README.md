# My_robot
Проект создания виртуальной концепции управления роботом с отроботкой сбора Docker контенера.

Данный проект разработан в рамках учебного курса для отработки навыков работы с Docker контенером, 
в котором смоделированы запуски ROS node для виртуального робота по схеме предсталеного в файле myrobot.pdf

Для запуска проекта вам необходима операционная система Linux (для примера Ubuntu 20.04)  и установленный Docker.

1. Для запуска проекта вам необходимо скачать Docker images по следующей ссылке:
 
docker pull ruslantrufanov/myrobot3:v3

2. После скачивания Docker image вам необходимо запустить данный образ со следующими параметрами,
которые обеспечивают проброс камеры и графического дисплея для работы в Rviz в контейнер,
а также в контейнере уже проброшен shh тунель:

docker run -d --rm --device=/dev/video0 -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix ruslantrufanov/myrobot3:v3

3. Данная команда запустить контейнер в фоновом режиме. Вы можете войти в контейнер как непосредственно через ID,
либо по shh тунелю.
Для демонстрации работы тунеля, вход, с возможностью запуска Rviz, необходимо осуществить по комманде:

  ssh -Y root@172.17.0.2

пароль для входа: 1234

4. Для запуска узлов ROS запустите мастер roscore, введя команду:

   roscore

6. Для запусков последующих узлов вам будет необходим новое окно терминала,
в котором вы можете войти в контенер по той же команде или id контейнера (можно узнать по команде docker ps):

  ssh -Y root@172.17.0.2

пароль для входа: 1234

6. Для запуска лидара vilodyne вам необходимо запустить следующий launch файл:

  roslaunch velodyne_pointcloud 32e_points.launch

Теперь вы можете получать данные с лидара

7. Для запуска камеры запустите следующий узел

rosrun cv_camera cv_camera_node _width:=640 _height:=480 _framerate:=30

8. Далее, вам нужно апустить Rviz по команде :

  rosrun rviz rviz
  
После запуска Rviz, для отображения в нем камеры, добавьте виджет изображения (Image):

        ◦ Нажмите кнопку "Add" в левом нижнем углу окна RViz.
        
        ◦ Выберите "Image" из списка виджетов.
        
        ◦ Установите следующие параметры:
        
            ▪ Name: Название виджета (например, "Camera Image").
            
            ▪ Image Topic: Выберите /cv_camera/image_raw из выпадающего списка.
            
            ▪ Transport: Оставьте по умолчанию "Raw" или выберите соответствующий тип транспорта для изображения вашего топика.
       
  Настройте отображение:
  
        ◦ Убедитесь, что выбран нужный топик и настройки транспорта соответствуют вашему изображению.
        
        ◦ Настройте отображение других параметров (например, размеры окна и т. д.) по вашему усмотрению.
  
  Просмотрите изображение: После настройки RViz, вы должны увидеть отображение изображения с камеры в соответствующем виджете. 
  Если изображение не отображается, убедитесь, что камера работает и передает изображения на топик /cv_camera/image_raw.

Примечания:

Если у вас не запускается Rviz, проверьте соответствующие настроеки для прослушивания порта 6000
в конфигурационных файлах X сервера в директории /etc/X11/xorg.conf.d/, 
если там нет соответсвующих настроек, вам придется создать соответствующий файл конфигурации.

Вот пример того, как можно создать такой файл с настройками прослушивания порта 6000:

    1. Создайте новый файл в директории /etc/X11/xorg.conf.d/. Допустим, назовем его 99-listen-address.conf:
    
         bashCopy code
         sudo nano /etc/X11/xorg.conf.d/99-listen-address.conf
    
    2. Добавьте следующие строки в этот файл для указания на прослушивание всех адресов (0.0.0.0):
    
         plaintextCopy code
           Section "ServerFlags"
           Option "ListenAddress" "0.0.0.0"
       EndSection
    
    3. Сохраните и закройте файл (Ctrl + X, затем подтвердите сохранение и выход).
    
    4. Перезапустите X сервер, чтобы применить изменения:
      
         bashCopy code
         sudo systemctl restart display-manager.service
    
    5. Проверьте прослушивание порта 6000:
    
         bashCopy code
         netstat -tuln | grep 6000

Теперь X сервер должен прослушивать порт 6000, и вы сможете подключаться к нему 
из контейнера Docker для запуска графических приложений, таких как rviz.
